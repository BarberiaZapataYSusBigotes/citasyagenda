<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BarberÃ­a Zapata y sus Bigotes</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="main-header">
        <div class="logo">
            <img src="Imagenes/logo.jpeg" alt="Logo" onerror="this.style.display='none'">
            <span>Zapata y sus Bigotes</span>
        </div>
        <nav class="main-nav">
            <ul><li><a href="#booking-form">Agendar</a></li></ul>
        </nav>
    </header>

    <div class="container">
        <h1>ğŸ’ˆ Agenda tu Cita</h1>

        <div class="step-indicator" id="step-indicator">
            <span class="active">1. Servicio</span>
            <span>2. Barbero</span>
            <span>3. Fecha</span>
        </div>

        <form id="booking-form">
            
            <section class="step active" data-step="1">
                <h2>Elige el Servicio</h2>
                <div id="services-container" class="selection-grid"></div>
                <div class="summary-text" id="service-summary">Selecciona una opciÃ³n arriba</div>
                <div class="buttons-row">
                    <button type="button" class="next-btn" disabled>Siguiente &rarr;</button>
                </div>
            </section>

            <section class="step" data-step="2">
                <h2>Elige a tu Barbero</h2>
                <div id="barber-container" class="selection-grid"></div>
                <div class="buttons-row">
                    <button type="button" class="prev-btn">&larr; Anterior</button>
                    <button type="button" class="next-btn" disabled>Siguiente &rarr;</button>
                </div>
            </section>

            <section class="step" data-step="3">
                
                <h2>1. Selecciona la Fecha</h2>
                <div class="calendar-wrapper">
                    <div class="calendar-header">
                        <button type="button" id="prev-month">&lt;</button>
                        <span id="month-year"></span>
                        <button type="button" id="next-month">&gt;</button>
                    </div>
                    <div class="calendar-days-header">
                        <span>Dom</span><span>Lun</span><span>Mar</span><span>MiÃ©</span><span>Jue</span><span>Vie</span><span>SÃ¡b</span>
                    </div>
                    <div id="calendar-grid" class="calendar-grid">
                        </div>
                </div>

                <div class="time-section">
                    <h3>2. Horarios Disponibles</h3>
                    <div id="hours-container" class="hours-grid">
                        <p class="info-text">ğŸ‘ˆ Toca un dÃ­a en el calendario (Lunes a Viernes)</p>
                    </div>
                </div>

                <div class="client-info-box">
                    <h3>3. Tus Datos</h3>
                    <input type="text" id="client-name" placeholder="Tu Nombre Completo" required>
                    <input type="tel" id="client-phone" placeholder="Tu TelÃ©fono (para WhatsApp)" required>
                </div>

                <div id="final-summary" class="summary-box"></div>

                <div class="gestion-container" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #444; text-align: center;">
                    <p style="font-size: 0.9em; color: #aaa; margin-bottom: 10px;">Â¿Necesitas cambios en una cita ya hecha?</p>
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button type="button" onclick="gestionarCita('cancelar')" style="background-color: #d9534f; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">
                            ğŸš« Cancelar
                        </button>
                        <button type="button" onclick="gestionarCita('reagendar')" style="background-color: #f0ad4e; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">
                            ğŸ”„ Reagendar
                        </button>
                    </div>
                </div>

                <div class="buttons-row" style="margin-top: 20px;">
                    <button type="button" class="prev-btn">&larr; Anterior</button>
                    <button type="submit" id="confirm-btn" disabled>Confirmar Cita âœ…</button>
                </div>
            </section>

        </form>

        <section id="contact" class="footer-info">
            <p>ğŸ“ Calle RevoluciÃ³n #104, Barranca de Otates, justo abajo de donde era billar rubio</p>
            <p>ğŸ“ 3341013535</p>
        </section>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="script.js"></script>
</body>
</html>